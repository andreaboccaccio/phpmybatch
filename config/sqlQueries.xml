<?xml version="1.0" encoding="UTF-8"?>
<!--
phpmybatch - An open source batches of goods management system software.
Copyright (C)2012 Andrea Boccaccio
contact email: andrea@andreaboccaccio.com

This file is part of phpmybatch.
 
phpmybatch is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

phpmybatch is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with phpmywhs.  If not, see <http://www.gnu.org/licenses/>.
 -->
<!DOCTYPE sqlQueries>
<sqlQueries>
	<sqlQuery id="ldBatch" displayName="Registro Carico e Identificazione dei Lotti">
		<strSQL>
			SELECT
				Data
				,FattN AS FatturaNumero
				,Nazione
				,LottoMacellazione
				,LottoEntrato AS Lotto
			FROM
			(
				SELECT
					batch AS LottoEntrato
					,batch_orig AS LottoMacellazione
					,country
					,document
				FROM ITEM_DENORM
				WHERE
				(
					(getBatchKind(batch)='BOVINI')
				)
			)AS I
			INNER JOIN
			(
				SELECT
					id AS docID
					,doc_date AS Data
					,code AS FattN
				FROM DOCUMENT_DENORM
			)AS D
			ON
			(I.document=D.docID)
			INNER JOIN
			(
				SELECT
					id AS countryID
					,codealpha2 AS Nazione
				FROM
					COUNTRY
			)AS C
			ON
			(I.country = C.countryID)
			ORDER BY
				CAST(CONCAT(SUBSTRING(Data,7,4),SUBSTRING(Data,4,2),SUBSTRING(Data,1,2)) AS UNSIGNED INTEGER)
				,LottoEntrato
		</strSQL>
		<printInfo pageOrientation="P" unit="mm" pageSize="A4"
			creator="phpmybatch by Andrea Boccaccio" author="Andrea Boccaccio"
			subject="Registro Carico e Identificazione dei Lotti"
			title="Registro Carico e Identificazione dei Lotti" >
			<pageHeader kind="Cell" hSize="15"
				display="Registro di Carico e Identificazione dei Lotti"
				fontFamily="Helvetica" fontStyle="B" fontSize="16" align="C"
				textColor="0,0,0" fill="enabled" fillColor="255,255,255"
				border="LTRB" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display=""
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="enabled" fillColor="255,255,255"
				border="" ln="1"/>
			<rowInfo headerHSize="7" bodyHSize="6" rowsPerPage="31" />
			<columnInfo sqlId="Data" wSize="30">
				<header display="Data" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="FatturaNumero" wSize="30">
				<header display="FATT N" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="Nazione" wSize="25">
				<header display="Nazione" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="LottoMacellazione" wSize="75">
				<header display="Lotto Macellazione" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Lotto" wSize="30">
				<header display="Lotto" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="integer" />
			</columnInfo>
		</printInfo>
	</sqlQuery>
	<sqlQuery id="ldUnldMeat" displayName="Registro Carico e Scarico delle Carni Bovine">
		<strSQL>
			SELECT
				LottoEntrato AS Lotto
				,CONCAT(SUBSTRING(I.MinDate,7,2),'/',SUBSTRING(I.MinDate,5,2),'/',SUBSTRING(I.MinDate,1,4)) AS DataArrivo
				,REPLACE(CAST( qta AS CHAR),'.',',') AS quantita
				,IFNULL(dic,'') AS DataInizioComm
				,IFNULL(dfc,'') AS DataFineComm
			FROM
			(
				SELECT
					batch AS LottoEntrato
					,CAST(MIN(CAST(CONCAT(SUBSTRING(arrival,7,4),SUBSTRING(arrival,4,2),SUBSTRING(arrival,1,2)) AS UNSIGNED INTEGER)) AS CHAR) AS MinDate
					,SUM(kg) AS qta
				FROM ITEM_DENORM
				WHERE
				(
					(getBatchKind(batch)='BOVINI')
				)
				GROUP BY
					batch
			)AS I
			LEFT OUTER JOIN
			(
				SELECT
					batch AS LottoUscita
					,vt_start AS dic
					,vt_end AS dfc
				FROM BATCH
				GROUP BY
					batch
			)AS O
			ON
			(I.LottoEntrato=O.LottoUscita)
			ORDER BY
				CAST(MinDate AS UNSIGNED INTEGER)
		</strSQL>
		<printInfo pageOrientation="P" unit="mm" pageSize="A4"
			creator="phpmybatch by Andrea Boccaccio" author="Andrea Boccaccio"
			subject="Registro Carico e Scarico delle Carni Bovine"
			title="Registro Carico e Scarico delle Carni Bovine" >
			<pageHeader kind="Cell" hSize="7"
				display="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="20" hSize="7"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0" />
			<pageHeader kind="Cell" wSize="75" hSize="7"
				display="Via XXXXXXXX, XX"
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="75" hSize="7"
				display="XXXXX XXXXXXXXXX XXXXXXXXX XX"
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="20" hSize="7"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="7"
				display="P. IVA XXXXXXXXXXX"
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="3"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1" />
			<pageHeader kind="Cell" hSize="10"
				display="REGISTRO CARICO E SCARICO DELLE CARNI BOVINE"
				fontFamily="Helvetica" fontStyle="B" fontSize="14" align="C"
				textColor="0,0,0" fill="enabled" fillColor="200,200,200"
				border="LTRB" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="12" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1" />
			<pageFooter kind="Cell" wSize="0" hSize="5"
				display="Pagina__________"
				fontFamily="Helvetica" fontStyle="" fontSize="10" align="R"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<rowInfo headerHSize="7" bodyHSize="6" rowsPerPage="18" />
			<columnInfo sqlId="Lotto" wSize="30">
				<header display="Identificazione" fontFamily="Helvetica" fontStyle="B"
					fontSize="10" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="200,200,200"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="10" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="255,255,255"
					fillBColor="200,200,200" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="DataArrivo" wSize="30">
				<header display="Data arrivo" fontFamily="Helvetica" fontStyle="B"
					fontSize="10" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="200,200,200"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="10" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="255,255,255"
					fillBColor="200,200,200" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="quantita" wSize="30">
				<header display="quantita'" fontFamily="Helvetica" fontStyle="B"
					fontSize="10" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="200,200,200"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="10" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="255,255,255"
					fillBColor="200,200,200" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="DataInizioComm" wSize="50">
				<header display="Data inizio commercializzazione" fontFamily="Helvetica" fontStyle="B"
					fontSize="9" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="200,200,200"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="10" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="255,255,255"
					fillBColor="200,200,200" border="LR" format="integer" />
			</columnInfo>
			<columnInfo sqlId="DataFineComm" wSize="50">
				<header display="Data fine commercializzazione" fontFamily="Helvetica" fontStyle="B"
					fontSize="9" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="200,200,200"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="10" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="255,255,255"
					fillBColor="200,200,200" border="LR" format="integer" />
			</columnInfo>
		</printInfo>
	</sqlQuery>
	<sqlQuery id="monthlyProDA" displayName="Prospetto mensile dei controlli documentali - Data Arrivo">
		<strSQL>
			SELECT
				FattN AS Numero
				,Data
				,Fornitore AS RilasciatoA
				,Nazione AS StatoOrigine
				,district AS Dipartimento
				,stabCEE AS NstabCEE
				,TipoProdotto
				,Colli
				,REPLACE(CAST(Kg AS CHAR),'.',',') AS Kg
				,SUBSTRING(SelDate,1,4) AS Anno
				,SUBSTRING(SelDate,5,2) AS Mese
				,'' AS DataControllo
				,'' AS Esito
			FROM
			(
				SELECT
					document
					,country
					,district
					,stabCEE
					,kind AS TipoProdotto
					,SUM(qty) AS Colli
					,SUM(kg) AS Kg
					,CAST(MIN(CAST(CONCAT(SUBSTRING(arrival,7,4),SUBSTRING(arrival,4,2),SUBSTRING(arrival,1,2)) AS UNSIGNED INTEGER)) AS CHAR) AS SelDate
				FROM ITEM_DENORM
				WHERE
				(
					(getBatchKind(batch)='BOVINI')
				)
				GROUP BY
					document
					,country
					,district
					,stabCEE
					,kind
			)AS I
			INNER JOIN
			(
				SELECT
					id AS docID
					,doc_date AS Data
					,code AS FattN
					,contractor AS Fornitore
				FROM DOCUMENT_DENORM
			)AS D
			ON
			(I.document=D.docID)
			INNER JOIN
			(
				SELECT
					id AS countryID
					,codealpha2 AS Nazione
				FROM
					COUNTRY
				WHERE
				(
					(codealpha2 != 'IT')
				)
			)AS C
			ON
			(I.country = C.countryID)
			ORDER BY
				CAST(SelDate AS UNSIGNED INTEGER)
		</strSQL>
		<printInfo pageOrientation="L" unit="mm" pageSize="A4"
			creator="phpmybatch by Andrea Boccaccio" author="Andrea Boccaccio"
			subject="Prospetto mensile dei controlli documentali"
			title="Prospetto mensile dei controlli documentali" >
			<pageHeader kind="Cell" wSize="18" hSize="5"
				display="Allegato n. .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="20" hSize="5"
				display="di pagine .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="35" hSize="5"
				display="alla comunicazione del ....................."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="10" hSize="5"
				display="prot. n. .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="135" hSize="5"
				display="U.S.L n. ............."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="R"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="40" hSize="5"
				display="di ..........................."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="Servizio Veterinario"
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="10"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="PROSPETTO MENSILE DEI CONTROLLI DOCUMENTALI"
				fontFamily="Helvetica" fontStyle="B" fontSize="8" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="relativi ai PRODOTTI oggetto di scambio comunitario"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="160" hSize="5"
				display="DATI CERTIFICATO/DOCUMENTI COMMERCIALI"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="LTRB" ln="0"/>
			<pageHeader kind="Cell" wSize="115" hSize="5"
				display="DATI PRODOTTI"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="LTRB" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="____________________"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="(1) FAVOREVOLE=F/NON FAVOREVOLE=NF"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageFooter kind="Cell" hSize="5"
				display="PAGINA N. ....."
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="R"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="In caso di esito non favorevole fare immediata comunicazione, utilizzando gli appositi modelli, all'Ufficio Veterinario per gli adempimenti comunitari del Piemonte"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="* SI/NO (si richiede un minimo del 5%)"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<rowInfo headerHSize="5" bodyHSize="4" rowsPerPage="11"
				pageFooterStart="40" />
			<columnInfo sqlId="Numero" wSize="20">
				<header display="Numero" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="Data" wSize="20">
				<header display="Data" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="RilasciatoA" wSize="25">
				<header display="Rilasciato a" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="StatoOrigine" wSize="25">
				<header display="Stato di origine" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Dipartimento" wSize="45">
				<header display="Regione o Dipartimento di provenienza" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="NstabCEE" wSize="25">
				<header display="N. stab. CEE" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="TipoProdotto" wSize="30">
				<header display="Tipo prodotto" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Colli" wSize="20">
				<header display="Colli" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Kg" wSize="20">
				<header display="Kg" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="DataControllo" wSize="30">
				<header display="Data controllo identita'*" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Esito" wSize="15">
				<header display="Esito(1)" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
		</printInfo>
	</sqlQuery>
	<sqlQuery id="monthlyProDF" displayName="Prospetto mensile dei controlli documentali - data fattura">
		<strSQL>
			SELECT
				FattN AS Numero
				,Data
				,Fornitore AS RilasciatoA
				,Nazione AS StatoOrigine
				,district AS Dipartimento
				,stabCEE AS NstabCEE
				,TipoProdotto
				,Colli
				,REPLACE(CAST(Kg AS CHAR),'.',',') AS Kg
				,SUBSTRING(SelDate,1,4) AS Anno
				,SUBSTRING(SelDate,5,2) AS Mese
				,'' AS DataControllo
				,'' AS Esito
			FROM
			(
				SELECT
					document
					,country
					,district
					,stabCEE
					,kind AS TipoProdotto
					,SUM(qty) AS Colli
					,SUM(kg) AS Kg
				FROM ITEM_DENORM
				WHERE
				(
					(getBatchKind(batch)='BOVINI')
				)
				GROUP BY
					document
					,country
					,district
					,stabCEE
					,kind
			)AS I
			INNER JOIN
			(
				SELECT
					id AS docID
					,doc_date AS Data
					,CONCAT(SUBSTRING(doc_date,7,4),SUBSTRING(doc_date,4,2),SUBSTRING(doc_date,1,2)) AS SelDate
					,code AS FattN
					,contractor AS Fornitore
				FROM DOCUMENT_DENORM
			)AS D
			ON
			(I.document=D.docID)
			INNER JOIN
			(
				SELECT
					id AS countryID
					,codealpha2 AS Nazione
				FROM
					COUNTRY
				WHERE
				(
					(codealpha2 != 'IT')
				)
			)AS C
			ON
			(I.country = C.countryID)
			ORDER BY
				CAST(SelDate AS UNSIGNED INTEGER)
		</strSQL>
		<printInfo pageOrientation="L" unit="mm" pageSize="A4"
			creator="phpmybatch by Andrea Boccaccio" author="Andrea Boccaccio"
			subject="Prospetto mensile dei controlli documentali"
			title="Prospetto mensile dei controlli documentali" >
			<pageHeader kind="Cell" wSize="18" hSize="5"
				display="Allegato n. .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="20" hSize="5"
				display="di pagine .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="35" hSize="5"
				display="alla comunicazione del ....................."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="10" hSize="5"
				display="prot. n. .........."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="135" hSize="5"
				display="U.S.L n. ............."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="R"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageHeader kind="Cell" wSize="40" hSize="5"
				display="di ..........................."
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="Servizio Veterinario"
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="10"
				display=""
				fontFamily="Helvetica" fontStyle="" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="PROSPETTO MENSILE DEI CONTROLLI DOCUMENTALI"
				fontFamily="Helvetica" fontStyle="B" fontSize="8" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" hSize="5"
				display="relativi ai PRODOTTI oggetto di scambio comunitario"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageHeader kind="Cell" wSize="160" hSize="5"
				display="DATI CERTIFICATO/DOCUMENTI COMMERCIALI"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="LTRB" ln="0"/>
			<pageHeader kind="Cell" wSize="115" hSize="5"
				display="DATI PRODOTTI"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="C"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="LTRB" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="____________________"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="(1) FAVOREVOLE=F/NON FAVOREVOLE=NF"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="0"/>
			<pageFooter kind="Cell" hSize="5"
				display="PAGINA N. ....."
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="R"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="In caso di esito non favorevole fare immediata comunicazione, utilizzando gli appositi modelli, all'Ufficio Veterinario per gli adempimenti comunitari del Piemonte"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<pageFooter kind="Cell" hSize="5"
				display="* SI/NO (si richiede un minimo del 5%)"
				fontFamily="Helvetica" fontStyle="B" fontSize="6" align="L"
				textColor="0,0,0" fill="disabled" fillColor="200,200,200"
				border="" ln="1"/>
			<rowInfo headerHSize="5" bodyHSize="4" rowsPerPage="11"
				pageFooterStart="40" />
			<columnInfo sqlId="Numero" wSize="20">
				<header display="Numero" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="Data" wSize="20">
				<header display="Data" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="RilasciatoA" wSize="25">
				<header display="Rilasciato a" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="text" />
			</columnInfo>
			<columnInfo sqlId="StatoOrigine" wSize="25">
				<header display="Stato di origine" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Dipartimento" wSize="45">
				<header display="Regione o Dipartimento di provenienza" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="NstabCEE" wSize="25">
				<header display="N. stab. CEE" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="TipoProdotto" wSize="30">
				<header display="Tipo prodotto" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Colli" wSize="20">
				<header display="Colli" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Kg" wSize="20">
				<header display="Kg" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="DataControllo" wSize="30">
				<header display="Data controllo identita'*" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
			<columnInfo sqlId="Esito" wSize="15">
				<header display="Esito(1)" fontFamily="Helvetica" fontStyle="B"
					fontSize="6" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="8" align="R"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LTRB" format="integer" />
			</columnInfo>
		</printInfo>
	</sqlQuery>
	<sqlQuery id="suppliers" displayName="Fornitori">
		<strSQL>
			SELECT contractor_code AS PIVA
				,contractor AS fornitore
				FROM DOCUMENT_DENORM
				GROUP BY contractor_code
					,contractor
		</strSQL>
		<printInfo  pageOrientation="P" unit="mm" pageSize="A4"
			creator="phpmybatch by Andrea Boccaccio" author="Andrea Boccaccio"
			subject="Fornitori" title="Fornitori" >
			<rowInfo headerHSize="7" bodyHSize="6" />
			<columnInfo sqlId="PIVA" wSize="40">
				<header display="PIVA" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="text" />
			</columnInfo>
			<columnInfo sqlId="fornitore" wSize="40">
				<header display="fornitore" fontFamily="Helvetica" fontStyle="B"
					fontSize="14" align="C"	textColor="0,0,0" fill="enabled"
					fillColor="255,255,255"	border="LTRB" />
				<body fontFamily="Times" fontStyle="" fontSize="12" align="L"
					textColor="0,0,0" fill="enabled" fillAColor="200,200,200"
					fillBColor="255,255,255" border="LR" format="text" />
			</columnInfo>
		</printInfo>
	</sqlQuery>
	<wizard id="stealBatch" displayName="Documenti DA cui spostare i lotti">
		<strSQL>
			SELECT
				id
				,kind
				,contractor
				,doc_date
				,code
			FROM
				DOCUMENT_DENORM
			ORDER BY
				kind
				,contractor
				,code
		</strSQL>
		<fieldsMapping>
			<insView id="batchSteal"/>
			<fieldMapping sql="id" viewInsert="oldDocId"/>
		</fieldsMapping>
		<paramsMapping>
			<paramMapping par="docId" viewInsert="newDocId"/>
		</paramsMapping>
		<fieldsView>
			<fieldView sql="kind" viewField="Tipo"/>
			<fieldView sql="contractor" viewField="Fornitore"/>
			<fieldView sql="doc_date" viewField="Data"/>
			<fieldView sql="code" viewField="Numero"/>
		</fieldsView>
		<fieldsFilter>
			<fieldFilter sql="kind" filterField="Tipo"/>
			<fieldFilter sql="contractor" filterField="Fornitore"/>
			<fieldFilter sql="code" filterField="Numero"/>
		</fieldsFilter>
	</wizard>
	<wizard id="newBatch" displayName="Lotti non ancora commercializzati">
		<strSQL>
			SELECT
				LottoEntrato AS Lotto
				,CONCAT(SUBSTRING(I.MinDate,7,2),'/',SUBSTRING(I.MinDate,5,2),'/',SUBSTRING(I.MinDate,1,4)) AS DataArrivo
			FROM
			(
				SELECT
					batch AS LottoEntrato
					,CAST(MIN(CAST(CONCAT(SUBSTRING(arrival,7,4),SUBSTRING(arrival,4,2),SUBSTRING(arrival,1,2)) AS UNSIGNED INTEGER)) AS CHAR) AS MinDate
				FROM ITEM_DENORM
				GROUP BY
					batch
			)AS I
			LEFT OUTER JOIN
			(
				SELECT
					batch AS LottoUscita
				FROM BATCH
				GROUP BY
					batch
			)AS O
			ON
			(I.LottoEntrato=O.LottoUscita)
			WHERE
			(
				(LottoUscita IS NULL)
			)
		</strSQL>
		<fieldsMapping>
			<insView id="batchNew"/>
			<fieldMapping sql="Lotto" viewInsert="batch"/>
		</fieldsMapping>
		<fieldsView>
			<fieldView sql="Lotto" viewField="Lotto"/>
			<fieldView sql="DataArrivo" viewField="DataArrivo"/>
		</fieldsView>
		<fieldsFilter>
			<fieldFilter sql="Lotto" filterField="Lotto"/>
		</fieldsFilter>
	</wizard>
	<wizard id="newItemIn" displayName="Lotti immessi nel sistema">
		<strSQL>
			SELECT
				Fornitore
				,Nazione
				,Dipartimento
				,NStabCEE
				,Lotto
				,Categoria
				,Colli
				,kg
				,DataArrivo
				,country
			FROM
				(
					SELECT
						kind AS Categoria
						,batch AS Lotto
						,country
						,district AS Dipartimento
						,stabCEE AS NStabCEE
						,qty AS Colli
						,kg
						,arrival AS DataArrivo
						,document
					 FROM ITEM_DENORM
				) AS L
				INNER JOIN
				(
					SELECT
						id AS countryID
						,codealpha2 AS Nazione
					FROM COUNTRY
				) AS C
				ON
				(L.country = C.countryID)
				INNER JOIN
				(
					SELECT
						id
						,contractor AS Fornitore
					FROM DOCUMENT_DENORM
				)AS D
				ON
				(L.document = D.id)
				ORDER BY
					Fornitore
					,Nazione
					,Dipartimento
					,NStabCEE
					,Categoria
					,DataArrivo
		</strSQL>
		<fieldsMapping>
			<insView id="itemNew"/>
			<fieldMapping sql="country" viewInsert="country"/>
			<fieldMapping sql="Dipartimento" viewInsert="district"/>
			<fieldMapping sql="NStabCEE" viewInsert="stabCEE"/>
			<fieldMapping sql="Lotto" viewInsert="batch"/>
			<fieldMapping sql="Categoria" viewInsert="kind"/>
			<fieldMapping sql="Colli" viewInsert="qty"/>
			<fieldMapping sql="kg" viewInsert="kg"/>
		</fieldsMapping>
		<paramsMapping>
			<paramMapping par="docId" viewInsert="docId"/>
		</paramsMapping>
		<fieldsView>
			<fieldView sql="Fornitore" viewField="Fornitore"/>
			<fieldView sql="Nazione" viewField="Nazione"/>
			<fieldView sql="Dipartimento" viewField="Dipartimento"/>
			<fieldView sql="NStabCEE" viewField="StabCEE"/>
			<fieldView sql="Lotto" viewField="Lotto"/>
			<fieldView sql="DataArrivo" viewField="DataArrivo"/>
			<fieldView sql="Categoria" viewField="Categoria"/>
		</fieldsView>
		<fieldsFilter>
			<fieldFilter sql="Fornitore" filterField="Fornitore"/>
			<fieldFilter sql="Nazione" filterField="Nazione"/>
			<fieldFilter sql="Dipartimento" filterField="Dipartimento"/>
			<fieldFilter sql="NStabCEE" filterField="StabCEE"/>
			<fieldFilter sql="Lotto" filterField="Lotto"/>
			<fieldFilter sql="Categoria" filterField="Categoria"/>
		</fieldsFilter>
	</wizard>
</sqlQueries>